{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import sendImg from\"./commentArrow.png\";import sendImg2 from\"./commentArrow2.png\";import imageImg from\"./camera-icon.png\";import\"./posts.css\";import downImg from\"./downArrow.png\";import upImg from\"./upArrow.png\";var login=localStorage.getItem('loggedIn');var userName=localStorage.getItem('username');function Posts(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),showComments=_useState4[0],setShowComments=_useState4[1];var _useState5=useState(\"false\"),_useState6=_slicedToArray(_useState5,2),set1=_useState6[0],set1Set=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),sendComment=_useState8[0],setSendComment=_useState8[1];function commentsOff(){var temp={};props.posts.map(function(ele){var x=ele.username+ele.date;temp[x]=\"off\";});return temp;}function commentsOff2(){var temp={};props.posts.map(function(ele){var x=ele.username+ele.date;temp[x]=\"off\";});setShowComments(temp);}function callComments(){if(set1===\"false\"){setShowComments(commentsOff());set1Set(\"true\");}}function storeComments(_x,_x2){return _storeComments.apply(this,arguments);}function _storeComments(){_storeComments=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,date){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(username+\" \"+date+\" \"+userName+\" \"+sendComment);_context.next=3;return fetch('/store-comments',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify({username:username,date:date,commentator:userName,comment:sendComment})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;setComments(json[0]);setSendComment(\"\");case 9:case\"end\":return _context.stop();}}},_callee);}));return _storeComments.apply(this,arguments);}function fetchComments(_x3,_x4){return _fetchComments.apply(this,arguments);}function _fetchComments(){_fetchComments=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username,date){var temp,query,response,json;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(showComments);temp=commentsOff();query=username+date;temp[query]=\"on\";setShowComments(temp);_context2.next=7;return fetch('/fetch-comments',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify({username:username,date:date})});case 7:response=_context2.sent;_context2.next=10;return response.json();case 10:json=_context2.sent;setComments(json[0]);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchComments.apply(this,arguments);}function convertDateTime(time){var hour=parseInt(time.slice(0,2));var minute=time.slice(3,5);if(hour>=12){if(hour===12)return hour.toString()+\":\"+minute+\" PM\";return(hour-12).toString()+\":\"+minute+\" PM\";}else{return hour.toString()+\":\"+minute+\" AM\";}}function textAreaChange(event){event.persist();setSendComment(event.target.value);}useEffect(function(){},[showComments]);useEffect(function(){},[set1]);useEffect(function(){},[comments]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(React.Fragment,null,callComments())),props.posts.map(function(ele){return/*#__PURE__*/React.createElement(\"div\",{className:\"dib shadow-5 post-card\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"image-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\"},/*#__PURE__*/React.createElement(\"img\",{className:\"user4\",src:ele.userImg,alt:\"img\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-xs-11 col-sm-11 col-md-11 col-lg-11\"},/*#__PURE__*/React.createElement(\"p\",{className:\"feed-username\"},ele.username),/*#__PURE__*/React.createElement(\"p\",{className:\"feed-date\"},ele.date.slice(0,5)+\" \"+convertDateTime(ele.date.slice(11,16))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"hr\",{style:{marginTop:\"9.5%\"},className:\"fancy-line-feed\"})),/*#__PURE__*/React.createElement(\"div\",{style:ele.img===\"\"?null:{minHeight:\"400px\"}},/*#__PURE__*/React.createElement(\"div\",null,ele.img===\"\"?null:/*#__PURE__*/React.createElement(\"img\",{className:\"shadow-5 post-image\",src:ele.img,alt:\"img\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"feed-text\"},ele.text))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"hr\",{style:{marginBottom:\"2.5%\"},className:\"fancy-line-feed\"})),/*#__PURE__*/React.createElement(\"div\",null,showComments[ele.username+ele.date]===\"off\"?/*#__PURE__*/React.createElement(\"div\",{style:{paddingBottom:\"2%\"},className:\"comment-heading tc\",onClick:function onClick(){return fetchComments(ele.username,ele.date);}},/*#__PURE__*/React.createElement(\"h3\",{style:{fontSize:\"1.3em\",display:\"inline\",margin:\"0\"},className:\"tc dark-gray\"},\"Comments\"),/*#__PURE__*/React.createElement(\"img\",{style:{opacity:\"0.85\",marginTop:\"0%\",width:\"2%\",height:\"2%\",marginLeft:\"1%\",marginBottom:\"-0.4%\"},src:downImg,alt:\"img\"})):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{paddingBottom:\"2%\"},className:\"comment-heading tc\",onClick:commentsOff2},/*#__PURE__*/React.createElement(\"h3\",{style:{fontSize:\"1.3em\",display:\"inline\",margin:\"0\"},className:\"tc dark-gray\"},\"Comments\"),/*#__PURE__*/React.createElement(\"img\",{style:{opacity:\"0.85\",marginTop:\"0%\",width:\"2%\",height:\"2%\",marginLeft:\"1%\",marginBottom:\"-0.4%\"},src:upImg,alt:\"img\"})),/*#__PURE__*/React.createElement(\"div\",{style:{marginLeft:\"2%\",paddingTop:\"1%\",width:\"100%\"},className:\"dib\"},props.hide===\"false\"?/*#__PURE__*/React.createElement(\"form\",{action:\"javascript:void(0);\",onSubmit:function onSubmit(){return storeComments(ele.username,ele.date);}},/*#__PURE__*/React.createElement(\"div\",{className:\"image-user-comment col-xs-1 col-sm-1 col-md-1 col-lg-1\"},/*#__PURE__*/React.createElement(\"img\",{className:\"user4\",src:props.image,alt:\"img\"})),/*#__PURE__*/React.createElement(\"div\",{style:{paddingLeft:\"0\"},className:\"col-xs-10 col-sm-10 col-md-10 col-lg-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:textAreaChange,className:\"comment-textarea\",name:\"Text1\",placeholder:\"Write a comment..\",value:sendComment})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-xs-1 col-sm-1 col-md-1 col-lg-1\"},/*#__PURE__*/React.createElement(\"input\",{className:\"sendImage-user-comment\",type:\"image\",src:sendImg}))):null),/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:\"2%\"}},comments.map(function(ele2){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"comment-username\"},ele2.username),/*#__PURE__*/React.createElement(\"p\",{className:\"comment-text\"},ele2.comment),ele2!==comments[comments.length-1]?/*#__PURE__*/React.createElement(\"hr\",{style:{marginBottom:\"1.2%\",marginTop:\"1.2%\"},className:\"fancy-line-feed\"}):null);})))));}));}export default Posts;","map":{"version":3,"sources":["/Users/nischitapai/Desktop/IR/src/components/feed/posts.js"],"names":["React","useState","useEffect","sendImg","sendImg2","imageImg","downImg","upImg","login","localStorage","getItem","userName","Posts","props","comments","setComments","showComments","setShowComments","set1","set1Set","sendComment","setSendComment","commentsOff","temp","posts","map","ele","x","username","date","commentsOff2","callComments","storeComments","console","log","fetch","method","headers","body","JSON","stringify","commentator","comment","response","json","fetchComments","query","convertDateTime","time","hour","parseInt","slice","minute","toString","textAreaChange","event","persist","target","value","userImg","marginTop","img","minHeight","text","marginBottom","paddingBottom","fontSize","display","margin","opacity","width","height","marginLeft","paddingTop","hide","image","paddingLeft","ele2","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport sendImg from \"./commentArrow.png\";\nimport sendImg2 from \"./commentArrow2.png\";\nimport imageImg from \"./camera-icon.png\";\nimport \"./posts.css\";\nimport downImg from \"./downArrow.png\";\nimport upImg from \"./upArrow.png\";\n\nvar login = localStorage.getItem('loggedIn');\nvar userName = localStorage.getItem('username');\n\nfunction Posts(props) {\n\n\tconst [comments, setComments] = useState([]);\n\tconst [showComments, setShowComments] = useState({});\n\tconst [set1, set1Set] = useState(\"false\");\n\tconst [sendComment, setSendComment] = useState(\"\");\n\n\tfunction commentsOff(){\n\t\tvar temp = {};\n\t\tprops.posts.map(ele => {\n\t\t\tvar x = ele.username + ele.date;\n\t\t\ttemp[x] = \"off\";\n\t\t})\n\t\t return temp;\n\t}\n\n\tfunction commentsOff2(){\n\t\tvar temp = {};\n\t\tprops.posts.map(ele => {\n\t\t\tvar x = ele.username + ele.date;\n\t\t\ttemp[x] = \"off\";\n\t\t})\n\t\t setShowComments(temp);\n\t}\n\n\tfunction callComments(){\n\t\tif(set1 === \"false\"){\n\t\t\tsetShowComments(commentsOff());\n\t\t\tset1Set(\"true\");\n\t\t}\n\t}\n\n\tasync function storeComments(username, date){\n\n\t\tconsole.log(username + \" \" + date + \" \" + userName + \" \" + sendComment);\n\t\tconst response = await fetch('/store-comments', {\n\t\t method: \"POST\",\n\t\t headers: {\n\t\t\t 'Content-type': 'application/json'\n\t\t },\n\t\t body: JSON.stringify({username:username, date:date, commentator:userName,comment:sendComment}),\n\t\t});\n\n\t\tconst json = await response.json();\n\t\tsetComments(json[0]);\n\t\tsetSendComment(\"\");\n\t}\n\n\tasync function fetchComments(username, date){\n\t\tconsole.log(showComments);\n\t\tvar temp = commentsOff();\n\t\tvar query = username + date;\n\n\t\ttemp[query] = \"on\";\n\t\tsetShowComments(temp);\n\n\t\tconst response = await fetch('/fetch-comments', {\n\t\t method: \"POST\",\n\t\t headers: {\n\t\t\t 'Content-type': 'application/json'\n\t\t },\n\t\t body: JSON.stringify({username:username, date:date}),\n\t\t});\n\n\t\tconst json = await response.json();\n\t\tsetComments(json[0]);\n\t}\n\n\tfunction convertDateTime(time){\n\n\t\tvar hour = parseInt(time.slice(0,2));\n\t\tvar minute = time.slice(3,5);\n\n\t\tif(hour >= 12){\n\t\t\tif(hour === 12) return (hour).toString() + \":\" + minute + \" PM\";\n\t\t\treturn (hour-12).toString() + \":\" + minute + \" PM\";\n\t\t}\n\t\telse{\n\t\t\treturn (hour).toString() + \":\" + minute + \" AM\";\n\t\t}\n\t}\n\n\tfunction textAreaChange(event){\n\t\tevent.persist();\n\t\tsetSendComment(event.target.value);\n\t}\n\n\tuseEffect(() => {}, [showComments]);\n\tuseEffect(() => {}, [set1]);\n\tuseEffect(() => {}, [comments]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div>{<>{callComments()}</>}</div>\n\t\t\t{props.posts.map(ele => (\n        <div className='dib shadow-5 post-card'>\n          <div>\n  \t\t\t\t\t<div className=\"image-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\">\n              <img className= \"user4\" src={ele.userImg} alt=\"img\"/>\n            </div>\n            <div className=\"col-xs-11 col-sm-11 col-md-11 col-lg-11\">\n              <p className=\"feed-username\">{ele.username}</p>\n              <p className=\"feed-date\">{ele.date.slice(0,5) + \" \" + convertDateTime(ele.date.slice(11,16))}</p>\n            </div>\n          </div>\n          <div>\n            <hr style={{marginTop:\"9.5%\"}} className=\"fancy-line-feed\"/>\n          </div>\n          <div style={ele.img===\"\" ? null : {minHeight:\"400px\"}}>\n            <div>\n              {ele.img===\"\" ? null: <img className=\"shadow-5 post-image\" src={ele.img} alt=\"img\"/>}\n            </div>\n            <div>\n              <p className=\"feed-text\">{ele.text}</p>\n            </div>\n          </div>\n          <div>\n            <hr style={{marginBottom:\"2.5%\"}} className=\"fancy-line-feed\"/>\n          </div>\n          <div>\n            {showComments[ele.username + ele.date] === \"off\" ?\n\t\t\t\t\t\t\t<div style={{paddingBottom:\"2%\"}} className=\"comment-heading tc\" onClick={() => fetchComments(ele.username, ele.date)}>\n\t\t\t\t\t\t\t\t<h3 style={{fontSize:\"1.3em\",display:\"inline\",margin:\"0\"}} className=\"tc dark-gray\">Comments</h3>\n\t\t\t\t\t\t\t\t<img style={{opacity:\"0.85\",marginTop:\"0%\", width:\"2%\", height:\"2%\", marginLeft:\"1%\",marginBottom:\"-0.4%\"}} src={downImg} alt=\"img\"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div style={{paddingBottom:\"2%\"}} className=\"comment-heading tc\" onClick={commentsOff2}>\n\t\t\t\t\t\t\t\t\t<h3 style={{fontSize:\"1.3em\",display:\"inline\",margin:\"0\"}} className=\"tc dark-gray\">Comments</h3>\n\t\t\t\t\t\t\t\t\t<img style={{opacity:\"0.85\",marginTop:\"0%\", width:\"2%\", height:\"2%\", marginLeft:\"1%\",marginBottom:\"-0.4%\"}} src={upImg} alt=\"img\"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div style={{marginLeft:\"2%\",paddingTop:\"1%\", width:\"100%\"}} className='dib'>\n\t\t\t\t\t\t\t\t\t{props.hide === \"false\" ? <form action=\"javascript:void(0);\" onSubmit={() => storeComments(ele.username, ele.date)}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"image-user-comment col-xs-1 col-sm-1 col-md-1 col-lg-1\"><img className= \"user4\" src={props.image} alt=\"img\"/></div>\n\t\t\t\t\t\t\t\t\t\t<div style={{paddingLeft:\"0\"}} className=\"col-xs-10 col-sm-10 col-md-10 col-lg-10\">\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" onChange={textAreaChange} className=\"comment-textarea\" name=\"Text1\" placeholder=\"Write a comment..\" value={sendComment}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"col-xs-1 col-sm-1 col-md-1 col-lg-1\">\n\t\t\t\t\t\t\t\t\t\t\t<input className=\"sendImage-user-comment\" type=\"image\" src={sendImg}/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</form>:null}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div style={{marginBottom:\"2%\"}}>\n\t\t\t\t\t\t\t\t\t{comments.map(ele2 => (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<h2 className=\"comment-username\">{ele2.username}</h2>\n\t\t\t\t              <p className=\"comment-text\">{ele2.comment}</p>\n\t\t\t\t\t\t\t\t\t\t\t{ele2 !== comments[comments.length-1] ? <hr style={{marginBottom:\"1.2%\",marginTop:\"1.2%\"}} className=\"fancy-line-feed\"/> : null}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n          </div>\n\t\t\t  </div>))}\n\t\t</div>\n\t)\n}\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}