{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import loginImg from\"../../login.svg\";import\"./style.scss\";import Dashboard from\"../../dashboard\";import Profile from\"../userPage/profile\";import{withRouter,Redirect,Route,Link}from'react-router-dom';import HeroSection,{IsLoggedIn,Username}from'../../../../components/HeroSection.js';var login=localStorage.getItem('loggedIn');var username=localStorage.getItem('username');function Login(){var _useState=useState({auth:\"true\"}),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState({auth:login}),_useState4=_slicedToArray(_useState3,2),isLogin=_useState4[0],setLogin=_useState4[1];var _useState5=useState(username),_useState6=_slicedToArray(_useState5,2),userName=_useState6[0],setUserName=_useState6[1];var json;function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var temp,url,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:temp=event.target[0].value;url='/login';console.log(\"making request\");console.log(event.target[0].value);_context.next=6;return fetch('/login',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify({\"username\":event.target[0].value,\"password\":event.target[1].value})});case 6:response=_context.sent;_context.next=9;return response.json();case 9:json=_context.sent;console.log(json);setValue(json);setLogin(json);setUserName(temp);event.preventDefault();case 15:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}useEffect(function(){login=isLogin.auth;},[isLogin]);useEffect(function(){username=userName;},[userName]);function loginPage(){return/*#__PURE__*/React.createElement(\"div\",{className:\"base-container4\",style:{height:\"40em\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"header4\"},\"Login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,action:\"javascript:void(0);\",method:\"POST\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image4\"},/*#__PURE__*/React.createElement(\"img\",{src:loginImg,alt:\"img\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label4\",htmlFor:\"username\"},\"Username\"),/*#__PURE__*/React.createElement(\"input\",{className:\"input4\",type:\"text\",name:\"username\",placeholder:\"username\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label4\",htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{className:\"input4\",type:\"password\",name:\"password\",placeholder:\"password\",required:true}))),/*#__PURE__*/React.createElement(\"div\",null,value.auth===\"false\"?/*#__PURE__*/React.createElement(\"p\",{style:{color:\"red\"}},\"Invalid username or password\"):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"footer\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary\",type:\"submit\"},\"Login\"))));}function redirect(){if(login===\"true\"){window.open(\"/\",\"_self\");}}function updateStorage(){localStorage.setItem(\"loggedIn\",login);localStorage.setItem(\"username\",userName);}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,loginPage()),/*#__PURE__*/React.createElement(\"div\",null,updateStorage()),/*#__PURE__*/React.createElement(\"div\",null,redirect()));}export default Login;// setValue(json);\n// console.log(value);\n//this.setState({ data: json[0] });\n// fetch(proxyurl + 'http://127.0.0.1:5000/login')\n// \t.then(response => {\n// \t\tconsole.log(response)\n// \t\treturn response.json()\n// \t})\n// \t.then(json => {\n// \t\tconsole.log = (json)\n// \t\t// this.setState({\n// \t\t// \tplayerName: json[0]\n// \t\t// })\n// \t})\n// useEffect(() => {\n// \tfetch(proxyurl + url) // https://cors-anywhere.herokuapp.com/https://example.com\n// \t.then(response => response.text())\n// \t.then(contents => console.log(\"Hello \" + contents))\n// \t.catch(() => console.log(\"Can’t access \" + url + \" response. Blocked by browser?\"))\n// },[])\n// const val = await fetch(proxyurl + url, {\n//     method:\"POST\",\n//     cache: \"no-cache\",\n//     headers:{\n//         \"content_type\":\"application/json\",\n//     },\n//     body:JSON.stringify(event.target[0].value)\n//     }) // https://cors-anywhere.herokuapp.com/https://example.com\n// .then(response => response.text())\n// .then(contents => console.log(\"Hello \" + contents))\n// .catch(() => console.log(\"Can’t access \" + url + \" response. Blocked by browser?\"))\n//\n// console.log(\"Done!!!\" + val);","map":{"version":3,"sources":["/Users/nischitapai/Desktop/IR/src/Login/src/components/login/login.jsx"],"names":["React","useState","useEffect","Dashboard","Profile","withRouter","Redirect","Route","Link","HeroSection","IsLoggedIn","Username","login","localStorage","getItem","username","Login","auth","value","setValue","isLogin","setLogin","userName","setUserName","json","handleSubmit","event","temp","target","url","console","log","fetch","method","headers","body","JSON","stringify","response","preventDefault","loginPage","height","loginImg","color","redirect","window","open","updateStorage","setItem"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport loginImg from \"../../login.svg\";\nimport \"./style.scss\";\nimport Dashboard from \"../../dashboard\";\nimport Profile from \"../userPage/profile\";\nimport { withRouter, Redirect, Route, Link } from 'react-router-dom';\nimport HeroSection, {IsLoggedIn, Username} from '../../../../components/HeroSection.js';\n\n\nvar login = localStorage.getItem('loggedIn');\nvar username = localStorage.getItem('username');\n\nfunction Login()\n{\n\tconst [value, setValue] = useState({auth:\"true\"});\n\tconst [isLogin, setLogin] = useState({auth:login});\n\tconst [userName, setUserName] = useState(username);\n\n\tvar json;\n\tasync function handleSubmit(event)\n\t{\n\t\tconst temp = event.target[0].value;\n\t\tconst url = '/login'\n\t\tconsole.log(\"making request\")\n\t\tconsole.log(event.target[0].value)\n\t\tconst response = await fetch('/login', {\n\t\t  method: \"POST\",\n\t\t  headers: {\n\t\t    'Content-type': 'application/json'\n\t\t  },\n\t\t  body: JSON.stringify({ \"username\": event.target[0].value, \"password\": event.target[1].value }),\n\t\t});\n\n    \tjson = await response.json();\n\t\tconsole.log(json);\n\n\t\tsetValue(json);\n\t\tsetLogin(json);\n\t\tsetUserName(temp);\n\t\tevent.preventDefault();\n\t}\n\n\tuseEffect(() => {\n\t\tlogin = isLogin.auth;\n\t},[isLogin])\n\n\tuseEffect(() => {\n\t\tusername = userName;\n\t}, [userName])\n\n\tfunction loginPage(){\n\t\treturn (\n\t\t<div className=\"base-container4\" style={{height:\"40em\"}}>\n\t      <div className=\"header4\">Login</div>\n\t\t  <form onSubmit={handleSubmit} action=\"javascript:void(0);\" method=\"POST\">\n\n\t\t\t  <div className=\"content4\">\n\t\t\t\t<div className=\"image4\">\n\t\t\t\t  <img src={loginImg} alt=\"img\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"form4\">\n\t\t\t\t  <div className=\"form-group4\">\n\t\t\t\t\t<label className=\"label4\" htmlFor=\"username\">Username</label>\n\t\t\t\t\t<input className=\"input4\" type=\"text\" name=\"username\" placeholder=\"username\" required/>\n\t\t\t\t  </div>\n\t\t\t\t  <div className=\"form-group4\">\n\t\t\t\t\t<label className=\"label4\" htmlFor=\"password\">Password</label>\n\t\t\t\t\t<input className=\"input4\" type=\"password\" name=\"password\" placeholder=\"password\" required/>\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{value.auth === \"false\" ? <p style={{color:\"red\"}}>Invalid username or password</p> : null}\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t  <div className=\"footer\">\n\t  \t\t  <button className=\"btn btn-secondary\" type=\"submit\">Login</button>\n\t  \t\t\t{/*<button type=\"button\" className=\"btn\">\n\t  \t\t\t  Login\n\t  \t\t\t</button>*/}\n\t\t\t   </div>\n\t\t  </form>\n\t    </div>)\n\t}\n\n\tfunction redirect()\n\t{\n\t\tif(login===\"true\")\n\t\t{\n\t\t\twindow.open(\"/\",\"_self\");\n\t\t}\n\t}\n\n\tfunction updateStorage()\n\t{\n\t\tlocalStorage.setItem(\"loggedIn\", login);\n\t\tlocalStorage.setItem(\"username\", userName);\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div>{loginPage()}</div>\n\t\t\t<div>{updateStorage()}</div>\n\t\t\t<div>{redirect()}</div>\n\t\t</div>\n\n\t);\n}\n\nexport default Login;\n\n\n\n\t\t// setValue(json);\n\t\t// console.log(value);\n    //this.setState({ data: json[0] });\n\n\t\t// fetch(proxyurl + 'http://127.0.0.1:5000/login')\n\t\t// \t.then(response => {\n\t\t// \t\tconsole.log(response)\n\t\t// \t\treturn response.json()\n\t\t// \t})\n\t\t// \t.then(json => {\n\t\t// \t\tconsole.log = (json)\n\t\t// \t\t// this.setState({\n\t\t// \t\t// \tplayerName: json[0]\n\t\t// \t\t// })\n\t\t// \t})\n\t\t// useEffect(() => {\n\t\t// \tfetch(proxyurl + url) // https://cors-anywhere.herokuapp.com/https://example.com\n\t\t// \t.then(response => response.text())\n\t\t// \t.then(contents => console.log(\"Hello \" + contents))\n\t\t// \t.catch(() => console.log(\"Can’t access \" + url + \" response. Blocked by browser?\"))\n\t\t// },[])\n\t\t// const val = await fetch(proxyurl + url, {\n    //     method:\"POST\",\n    //     cache: \"no-cache\",\n    //     headers:{\n    //         \"content_type\":\"application/json\",\n    //     },\n    //     body:JSON.stringify(event.target[0].value)\n    //     }) // https://cors-anywhere.herokuapp.com/https://example.com\n\t\t// .then(response => response.text())\n\t\t// .then(contents => console.log(\"Hello \" + contents))\n\t\t// .catch(() => console.log(\"Can’t access \" + url + \" response. Blocked by browser?\"))\n\t\t//\n\t\t// console.log(\"Done!!!\" + val);\n"]},"metadata":{},"sourceType":"module"}