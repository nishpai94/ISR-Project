{"ast":null,"code":"var _jsxFileName = \"/Users/tazeen/Desktop/IR/src/components/feed/rightPanel.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport sendImg from \"./icon-send.png\";\nimport imageImg from \"./camera-icon.png\";\nimport Posts from \"./posts\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar login = localStorage.getItem('loggedIn');\nvar userName = localStorage.getItem('username');\n\nfunction RightPanel() {\n  _s();\n\n  const [username, setUsername] = useState(userName);\n  const [email, setEmail] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [fetched, setFetched] = useState(\"false\");\n  const [image, setImage] = useState(\"\");\n  const [uploadInput, setUploadInput] = useState();\n  const [post, setPost] = useState(\"\");\n  const [fetched1, setFetched1] = useState(\"false\");\n  const [posts, setPosts] = useState([]);\n\n  async function fetchPosts() {\n    //console.log(\"Ankit\");\n    const response = await fetch('/fetch-posts', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(userName)\n    });\n    var temp = await response.json();\n    setPosts(temp[0]);\n    console.log(temp[0]);\n  }\n\n  function fetchPostsCall() {\n    if (fetched1 === \"false\") {\n      fetchPosts();\n      setFetched1(\"true\");\n    }\n  }\n\n  async function fetchUserDetails() {\n    //console.log(\"Ankit\");\n    const response = await fetch('/profile-stats', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(username)\n    });\n    var temp = await response.json();\n    setEmail(temp.email);\n    setBio(temp.bio);\n    setImage(temp.image);\n  }\n\n  function fetchUserDetailsCall() {\n    if (fetched === \"false\") {\n      fetchUserDetails();\n      setFetched(\"true\");\n    }\n  }\n\n  const getBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  async function uploadPost(event) {\n    event.persist(); // event.preventDefault();\n\n    const data = new FormData();\n    data.append('file', uploadInput.files[0]);\n    const file = uploadInput.files[0];\n\n    if (file === undefined) {\n      await fetch('/user-post', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          Image: \"\",\n          Username: username,\n          Post: post\n        })\n      }).then(response => response.json()).then(json => {\n        var tempPosts = posts;\n        tempPosts.unshift(json);\n        console.log(tempPosts);\n        setPosts(tempPosts);\n      });\n      setPost(\"\");\n    } else {\n      getBase64(file).then(base64 => {\n        console.log(base64);\n        console.log(post);\n        const response = fetch('/user-post', {\n          method: \"POST\",\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify({\n            Image: base64,\n            Username: username,\n            Post: post\n          })\n        }).then(response => response.json()).then(json => {\n          var tempPosts = posts;\n          tempPosts.unshift(json);\n          setPosts(tempPosts);\n          console.log(tempPosts);\n        });\n        console.debug(\"file stored\", base64);\n        setPost(\"\");\n      });\n    }\n\n    console.log(post);\n  }\n\n  function textAreaChange(event) {\n    event.persist();\n    setPost(event.target.value);\n  }\n\n  useEffect(() => {}, [post]);\n  useEffect(() => {}, [posts]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: fetchUserDetailsCall()\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        paddingTop: \"1%\"\n      },\n      className: \"dib shadow-5 post-card\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        action: \"javascript:void(0);\",\n        onSubmit: uploadPost,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"user4\",\n            src: image,\n            alt: \"img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 75\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-9 col-sm-9 col-md-9 col-lg-9\",\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"post-textarea\",\n            name: \"Text1\",\n            cols: \"78\",\n            rows: \"3\",\n            placeholder: \"what's on your mind?\",\n            onChange: textAreaChange,\n            value: post\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"custom-file-input-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"file-input\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                style: {\n                  height: \"50px\",\n                  width: \"75px\",\n                  cursor: \"pointer\"\n                },\n                src: imageImg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: ref => {\n                setUploadInput(ref);\n              },\n              style: {\n                display: \"none\"\n              },\n              id: \"file-input\",\n              type: \"file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sendImage-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"image\",\n            name: \"submit_blue\",\n            value: \"blue\",\n            alt: \"blue\",\n            src: sendImg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: fetchPostsCall()\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: posts.length > 0 ? /*#__PURE__*/_jsxDEV(Posts, {\n        posts: posts,\n        image: image,\n        hide: \"false\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"tc dark-gray\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 77\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 3\n  }, this);\n}\n\n_s(RightPanel, \"4vs1LljHwpd9I5D+v2Yy8CdxY9w=\");\n\n_c = RightPanel;\nexport default RightPanel;\n\nvar _c;\n\n$RefreshReg$(_c, \"RightPanel\");","map":{"version":3,"sources":["/Users/tazeen/Desktop/IR/src/components/feed/rightPanel.js"],"names":["React","useState","useEffect","sendImg","imageImg","Posts","login","localStorage","getItem","userName","RightPanel","username","setUsername","email","setEmail","bio","setBio","fetched","setFetched","image","setImage","uploadInput","setUploadInput","post","setPost","fetched1","setFetched1","posts","setPosts","fetchPosts","response","fetch","method","headers","body","JSON","stringify","temp","json","console","log","fetchPostsCall","fetchUserDetails","fetchUserDetailsCall","getBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","uploadPost","event","persist","data","FormData","append","files","undefined","Image","Username","Post","then","tempPosts","unshift","base64","debug","textAreaChange","target","value","paddingTop","height","width","cursor","ref","display","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport sendImg from \"./icon-send.png\";\nimport imageImg from \"./camera-icon.png\";\nimport Posts from \"./posts\";\n\nvar login = localStorage.getItem('loggedIn');\nvar userName = localStorage.getItem('username');\n\nfunction RightPanel() {\n\n\tconst[username, setUsername] = useState(userName);\n  const[email, setEmail] = useState(\"\");\n  const[bio, setBio] = useState(\"\");\n\tconst[fetched, setFetched] = useState(\"false\");\n\tconst [image, setImage] = useState(\"\");\n\n\tconst [uploadInput, setUploadInput] = useState();\n\n\tconst[post, setPost] = useState(\"\");\n\n\tconst[fetched1, setFetched1] = useState(\"false\");\n  const[posts, setPosts] = useState([]);\n\n  async function fetchPosts(){\n    //console.log(\"Ankit\");\n    const response = await fetch('/fetch-posts', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(userName),\n    });\n\n      var temp = await response.json();\n      setPosts(temp[0]);\n      console.log(temp[0]);\n  }\n\n  function fetchPostsCall(){\n    if(fetched1 === \"false\"){\n      fetchPosts();\n      setFetched1(\"true\");\n    }\n  }\n\n\tasync function fetchUserDetails(){\n    //console.log(\"Ankit\");\n    const response = await fetch('/profile-stats', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(username),\n    });\n\n      var temp = await response.json();\n      setEmail(temp.email);\n      setBio(temp.bio);\n      setImage(temp.image);\n  }\n\n  function fetchUserDetailsCall(){\n    if(fetched === \"false\"){\n      fetchUserDetails();\n      setFetched(\"true\");\n    }\n  }\n\n\tconst getBase64 = (file) => {\n   return new Promise((resolve,reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n      reader.readAsDataURL(file);\n   });\n }\n\n\tasync function uploadPost(event){\n\t\tevent.persist();\n    // event.preventDefault();\n    const data = new FormData();\n    data.append('file', uploadInput.files[0]);\n\n    const file = uploadInput.files[0];\n\t\tif(file===undefined){\n\t\t\tawait fetch('/user-post', {\n\t\t\t method: \"POST\",\n\t\t\t headers: {\n\t\t\t\t 'Content-type': 'application/json'\n\t\t\t },\n\t\t\t body: JSON.stringify({Image:\"\", Username:username, Post:post}),\n\t\t\t}).then((response) => response.json())\n\t\t    .then((json) => {\n\t\t\t\t\tvar tempPosts = posts;\n\t\t\t\t\ttempPosts.unshift(json);\n\t\t\t\t\tconsole.log(tempPosts);\n\t\t\t\t\tsetPosts(tempPosts);\n\t\t    });\n\t\t\t\tsetPost(\"\");\n\t\t}\n\t\telse{\n\t\t\tgetBase64(file).then(base64 => {\n\t\t\t\tconsole.log(base64);\n\t\t\t\tconsole.log(post);\n\t      const response = fetch('/user-post', {\n\t       method: \"POST\",\n\t       headers: {\n\t         'Content-type': 'application/json'\n\t       },\n\t       body: JSON.stringify({Image:base64, Username:username, Post:post}),\n\t      }).then((response) => response.json())\n\t\t\t    .then((json) => {\n\t\t\t\t\t\tvar tempPosts = posts;\n\t\t\t\t\t\ttempPosts.unshift(json);\n\t\t\t\t\t\tsetPosts(tempPosts);\n\t\t\t\t\t\tconsole.log(tempPosts);\n\t\t\t    });\n\t      console.debug(\"file stored\",base64);\n\t\t\t\tsetPost(\"\");\n\n\t\t\t});\n\n\n\t\t}\n\t\tconsole.log(post);\n\t}\n\n\tfunction textAreaChange(event){\n\t\tevent.persist();\n\t\tsetPost(event.target.value);\n\t}\n\n\tuseEffect(() => {}, [post]);\n\tuseEffect(() => {}, [posts]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div>{<>{fetchUserDetailsCall()}</>}</div>\n\t\t\t<div style={{paddingTop:\"1%\"}} className='dib shadow-5 post-card'>\n\t\t\t\t<form action=\"javascript:void(0);\" onSubmit={uploadPost}>\n\t\t\t\t\t<div className=\"image-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\"><img className= \"user4\" src={image} alt=\"img\"/></div>\n\t\t\t\t\t<div className=\"col-xs-9 col-sm-9 col-md-9 col-lg-9\">\n\t\t\t\t\t\t\t<textarea className=\"post-textarea\" name=\"Text1\" cols=\"78\" rows=\"3\" placeholder=\"what's on your mind?\" onChange={textAreaChange} value={post}></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"image-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\">\n\t\t\t\t\t\t<div className=\"custom-file-input-2\">\n\t\t\t\t\t\t\t<label for=\"file-input\">\n\t\t\t\t\t\t\t\t<img style={{height:\"50px\", width:\"75px\",cursor: \"pointer\"}} src={imageImg}/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input ref={(ref) => { setUploadInput(ref) }} style={{display:\"none\"}} id=\"file-input\" type=\"file\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"sendImage-user-post col-xs-1 col-sm-1 col-md-1 col-lg-1\">\n\t\t\t\t\t\t<input type=\"image\" name=\"submit_blue\" value=\"blue\" alt=\"blue\" src={sendImg}/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t{<>{fetchPostsCall()}</>}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{posts.length > 0 ? <Posts posts={posts} image={image} hide=\"false\"/> : <h1 className=\"tc dark-gray\">Loading...</h1>}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default RightPanel;\n"]},"metadata":{},"sourceType":"module"}