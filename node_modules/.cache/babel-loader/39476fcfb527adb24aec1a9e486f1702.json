{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nischitapai/Desktop/IR/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Cards from\"../../../../components/Cards\";import Posts from\"../../../../components/feed/posts\";import\"./profile.css\";import backImg from\"./back-img.jpg\";import userImg from\"./user-img.png\";//import \"@fortawesome/fontawesome-free/css/all.min.css\";\nvar login=localStorage.getItem('loggedIn');var userName=localStorage.getItem('username');var tempImg=\"\";function Profile(){var _useState=useState(userName),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),bio=_useState6[0],setBio=_useState6[1];var _useState7=useState(\"false\"),_useState8=_slicedToArray(_useState7,2),bioChange=_useState8[0],updateBio=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],changePassword=_useState10[1];var _useState11=useState(\"false\"),_useState12=_slicedToArray(_useState11,2),passwordChange=_useState12[0],updatePassword=_useState12[1];var _useState13=useState(\"false\"),_useState14=_slicedToArray(_useState13,2),passwordWrong=_useState14[0],passwordWrongUpdate=_useState14[1];var _useState15=useState(\"true\"),_useState16=_slicedToArray(_useState15,2),oldPasswordCorrect=_useState16[0],setOldPasswordCorrect=_useState16[1];var _useState17=useState(\"false\"),_useState18=_slicedToArray(_useState17,2),fetched=_useState18[0],setFetched=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),recipes=_useState20[0],setRecipes=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),image=_useState22[0],setImage=_useState22[1];var _useState23=useState(\"false\"),_useState24=_slicedToArray(_useState23,2),imageOption=_useState24[0],setImageOption=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),uploadInput=_useState26[0],setUploadInput=_useState26[1];var _useState27=useState(\"false\"),_useState28=_slicedToArray(_useState27,2),fetched1=_useState28[0],setFetched1=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),posts=_useState30[0],setPosts=_useState30[1];function fetchPosts(){return _fetchPosts.apply(this,arguments);}function _fetchPosts(){_fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,temp,temp2,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/fetch-posts',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify(userName)});case 2:response=_context.sent;_context.next=5;return response.json();case 5:temp=_context.sent;temp2=[];for(i=0;i<temp[0].length;++i){if(temp[0][i].username===userName){temp2.push(temp[0][i]);}}setPosts(temp2);console.log(temp[0]);case 10:case\"end\":return _context.stop();}}},_callee);}));return _fetchPosts.apply(this,arguments);}function fetchPostsCall(){if(fetched1===\"false\"){fetchPosts();setFetched1(\"true\");}}// useEffect(() => {\n//\n//   async function fetchUserDetails(){\n//     const response = await fetch('/profile-stats', {\n// \t\t  method: \"POST\",\n// \t\t  headers: {\n// \t\t    'Content-type': 'application/json'\n// \t\t  },\n// \t\t  body: JSON.stringify(username),\n// \t\t});\n//\n//     \tvar temp = await response.json();\n//       setEmail(temp.email);\n//       setBio(temp.bio);\n//       setRecipes(temp.fav_recipes);\n//   }\n//\n//   fetchUserDetails();\n//  });\nfunction fetchUserDetails(){return _fetchUserDetails.apply(this,arguments);}function _fetchUserDetails(){_fetchUserDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,temp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/profile-stats',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify(username)});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:temp=_context2.sent;setEmail(temp.email);setBio(temp.bio);setRecipes(temp.fav_recipes);setImage(temp.image);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchUserDetails.apply(this,arguments);}function fetchUserDetailsCall(){if(fetched===\"false\"){fetchUserDetails();setFetched(\"true\");}}useEffect(function(){},[email]);useEffect(function(){},[bio]);useEffect(function(){},[recipes]);//This line leads to backend request infinite loop\nuseEffect(function(){},[imageOption]);function bioSetting(event){event.persist();if(bioChange===\"true\"){console.log(event.target[0].value);if(event.target[0].value.length===0){console.log(\"Empty Bio not allowed!\");}else{fetch('/set-bio',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify({Username:username,Bio:event.target[0].value})});setBio(event.target[0].value);}updateBio(\"false\");}else{updateBio(\"true\");}}function bioFunction(){if(bioChange===\"false\"){return/*#__PURE__*/React.createElement(\"button\",{onClick:bioSetting,type:\"button\",className:\"btn btn-outline-secondary\"},\"Change bio\");}else{return/*#__PURE__*/React.createElement(\"form\",{onSubmit:bioSetting,action:\"javascript:void(0);\",method:\"POST\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group2\"},/*#__PURE__*/React.createElement(\"input\",{type:\" type\",className:\"textArea2 center\",name:\"paragraph_text\",cols:\"50\",rows:\"5\",required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-outline-secondary center\",value:\"Update bio\"}))));}}function passwordSetting(_x){return _passwordSetting.apply(this,arguments);}function _passwordSetting(){_passwordSetting=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var response,json;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.persist();if(password.length===0){updatePassword(\"false\");setOldPasswordCorrect(\"true\");}if(!(passwordWrong===\"true\")){_context3.next=6;break;}console.log(\"Password doesn't match!\");_context3.next=19;break;case 6:if(!(passwordChange===\"true\")){_context3.next=18;break;}console.log(event.target[0].value);console.log(event.target[1].value);_context3.next=11;return fetch('/change-password',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify({Username:username,\"old\":event.target[0].value,\"new\":event.target[1].value})});case 11:response=_context3.sent;_context3.next=14;return response.json();case 14:json=_context3.sent;if(json.auth===\"true\"){console.log(\"Successful\");updatePassword(\"false\");setOldPasswordCorrect(\"true\");}else{setOldPasswordCorrect(\"false\");}_context3.next=19;break;case 18:updatePassword(\"true\");case 19:case\"end\":return _context3.stop();}}},_callee3);}));return _passwordSetting.apply(this,arguments);}useEffect(function(){},[oldPasswordCorrect]);function updateNewPassword(event){event.persist();changePassword(event.target.value);}function checkNewPassword(event){event.persist();if(event.target.value===password){passwordWrongUpdate(\"false\");}else{passwordWrongUpdate(\"true\");}}function passwordFunction(){if(passwordChange===\"false\"){return/*#__PURE__*/React.createElement(\"button\",{onClick:passwordSetting,type:\"button\",className:\"btn btn-outline-secondary\"},\"Change Password\");}else{return/*#__PURE__*/React.createElement(\"form\",{onSubmit:passwordSetting,action:\"javascript:void(0);\",method:\"POST\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input2 password-input2\",type:\"password\",name:\"old-password\",placeholder:\"old password\",required:true}),/*#__PURE__*/React.createElement(\"input\",{onChange:updateNewPassword,className:\"input2 password-input2\",type:\"password\",name:\"new-password\",placeholder:\"new password\",minlength:\"6\",required:true}),/*#__PURE__*/React.createElement(\"input\",{onChange:checkNewPassword,className:\"input2 password-input2\",type:\"password\",name:\"confirm-password\",placeholder:\"confirm password\",required:true}),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"5px\"}},passwordWrong===\"true\"?/*#__PURE__*/React.createElement(\"p\",{style:{color:\"red\"}},\"Password doesn't match.\"):null),/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",padding:\"5px\"}},oldPasswordCorrect===\"false\"?/*#__PURE__*/React.createElement(\"p\",{style:{color:\"red\"}},\"Old Password doesn't match.\"):null),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-outline-secondary center\",value:\"Update Password\"}))));}}var getBase64=function getBase64(file){return new Promise(function(resolve,reject){var reader=new FileReader();reader.onload=function(){return resolve(reader.result);};reader.onerror=function(error){return reject(error);};reader.readAsDataURL(file);});};function newImage(_x2){return _newImage.apply(this,arguments);}function _newImage(){_newImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(event){var data,file;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.persist();// event.preventDefault();\ndata=new FormData();data.append('file',uploadInput.files[0]);file=uploadInput.files[0];getBase64(file).then(function(base64){setImage(base64);var response=fetch('/user-image-change',{method:\"POST\",headers:{'Content-type':'application/json'},body:JSON.stringify({Image:base64,Username:username})});console.debug(\"file stored\",base64);//console.log(\"file stored\",base64);\n});setImageOption(\"false\");case 6:case\"end\":return _context4.stop();}}},_callee4);}));return _newImage.apply(this,arguments);}function changeUserImage(){imageOption===\"false\"?setImageOption(\"true\"):setImageOption(\"false\");}var _useState31=useState(\"left\"),_useState32=_slicedToArray(_useState31,2),selected=_useState32[0],setSelected=_useState32[1];//useEffect(() => {},[selected]);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"profile-container\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(React.Fragment,null,fetchUserDetailsCall())),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"back-img\",src:backImg,alt:\"img\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"container2\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"user2\",src:image,alt:\"img\",onClick:changeUserImage}),imageOption===\"true\"?/*#__PURE__*/React.createElement(\"form\",{action:\"javascript:void(0);\",onSubmit:newImage},/*#__PURE__*/React.createElement(\"div\",{className:\"tc\",style:{marginLeft:\"100px\"}},/*#__PURE__*/React.createElement(\"input\",{className:\"btn btn-outline-secondary\",ref:function ref(_ref){setUploadInput(_ref);},type:\"file\",accept:\"image/*\",required:true}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-secondary\"},\"Upload\"))):null,/*#__PURE__*/React.createElement(\"h2\",{className:\"header2\"},username),/*#__PURE__*/React.createElement(\"p\",{className:\"header-content2\"},email),/*#__PURE__*/React.createElement(\"div\",{className:\"city2 header-content2\"},/*#__PURE__*/React.createElement(\"i\",{className:\"city2 header-content2 fas fa-map-marker-alt mr-2 text-lg text-gray-500\"}),\" \",\"Chandigarh, India\"),/*#__PURE__*/React.createElement(\"div\",{className:\"button-css2\"},/*#__PURE__*/React.createElement(React.Fragment,null,passwordFunction())),/*#__PURE__*/React.createElement(\"hr\",{className:\"fancy-line\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"bio\"},/*#__PURE__*/React.createElement(\"p\",null,bio)),/*#__PURE__*/React.createElement(\"div\",{className:\"button-css2\"},/*#__PURE__*/React.createElement(React.Fragment,null,bioFunction())))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(React.Fragment,null,fetchPostsCall())),selected===\"left\"?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"tc dashboard-favorites\"},\"My Favorites\")),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setSelected(\"right\");},className:\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"tc dashboard-favorites\"},\"My Posts\"))),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"97%\",margin:\"auto\",marginTop:\"4%\"}},recipes.length===0?/*#__PURE__*/React.createElement(\"h1\",{className:\"tc\",style:{padding:\"4%\",paddingTop:\"3%\",color:\"#202020\"}},\"You have no Favorite Recipes yet!\"):/*#__PURE__*/React.createElement(Cards,{recipes:recipes}))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{height:\"100px\"}},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return setSelected(\"left\");},className:\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"tc dashboard-favorites\"},\"My Favorites\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"tc dashboard-favorites\"},\"My Posts\"))),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"90%\",alignContent:\"center\",margin:\"auto\",marginTop:\"4%\"}},posts.length===0?/*#__PURE__*/React.createElement(\"h1\",{className:\"tc\",style:{padding:\"4%\",paddingTop:\"3%\",color:\"#202020\"}},\"You have no Posts yet!\"):/*#__PURE__*/React.createElement(Posts,{posts:posts,hide:\"true\"}))));}export default Profile;","map":{"version":3,"sources":["/Users/nischitapai/Desktop/IR/src/Login/src/components/userPage/profile.js"],"names":["React","useState","useEffect","Cards","Posts","backImg","userImg","login","localStorage","getItem","userName","tempImg","Profile","username","setUsername","email","setEmail","bio","setBio","bioChange","updateBio","password","changePassword","passwordChange","updatePassword","passwordWrong","passwordWrongUpdate","oldPasswordCorrect","setOldPasswordCorrect","fetched","setFetched","recipes","setRecipes","image","setImage","imageOption","setImageOption","uploadInput","setUploadInput","fetched1","setFetched1","posts","setPosts","fetchPosts","fetch","method","headers","body","JSON","stringify","response","json","temp","temp2","i","length","push","console","log","fetchPostsCall","fetchUserDetails","fav_recipes","fetchUserDetailsCall","bioSetting","event","persist","target","value","Username","Bio","bioFunction","passwordSetting","auth","updateNewPassword","checkNewPassword","passwordFunction","margin","padding","color","getBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","newImage","data","FormData","append","files","then","base64","Image","debug","changeUserImage","selected","setSelected","marginLeft","ref","height","width","marginTop","paddingTop","alignContent"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport Cards from \"../../../../components/Cards\";\nimport Posts from \"../../../../components/feed/posts\";\nimport \"./profile.css\"\nimport backImg from \"./back-img.jpg\"\nimport userImg from \"./user-img.png\"\n//import \"@fortawesome/fontawesome-free/css/all.min.css\";\n\nvar login = localStorage.getItem('loggedIn');\nvar userName = localStorage.getItem('username');\nvar tempImg = \"\";\n\nfunction Profile() {\n  const[username, setUsername] = useState(userName);\n  const[email, setEmail] = useState(\"\");\n  const[bio, setBio] = useState(\"\");\n  const[bioChange, updateBio] = useState(\"false\");\n  const[password, changePassword] = useState(\"\");\n  const[passwordChange, updatePassword] = useState(\"false\");\n  const[passwordWrong, passwordWrongUpdate] = useState(\"false\");\n\n  const[oldPasswordCorrect, setOldPasswordCorrect] = useState(\"true\");\n\n  const[fetched, setFetched] = useState(\"false\");\n\n  const [recipes, setRecipes] = useState([]);\n  const [image, setImage] = useState(\"\");\n\n  const [imageOption, setImageOption] = useState(\"false\");\n  const [uploadInput, setUploadInput] = useState();\n\n  const[fetched1, setFetched1] = useState(\"false\");\n  const[posts, setPosts] = useState([]);\n\n  async function fetchPosts(){\n    //console.log(\"Ankit\");\n    const response = await fetch('/fetch-posts', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(userName),\n    });\n\n      var temp = await response.json();\n      var temp2= []\n      for(var i=0;i<temp[0].length;++i){\n        if(temp[0][i].username === userName){\n          temp2.push(temp[0][i]);\n        }\n      }\n      setPosts(temp2);\n      console.log(temp[0]);\n  }\n\n  function fetchPostsCall(){\n    if(fetched1 === \"false\"){\n      fetchPosts();\n      setFetched1(\"true\");\n    }\n  }\n\n\n\n  // useEffect(() => {\n  //\n  //   async function fetchUserDetails(){\n  //     const response = await fetch('/profile-stats', {\n  // \t\t  method: \"POST\",\n  // \t\t  headers: {\n  // \t\t    'Content-type': 'application/json'\n  // \t\t  },\n  // \t\t  body: JSON.stringify(username),\n  // \t\t});\n  //\n  //     \tvar temp = await response.json();\n  //       setEmail(temp.email);\n  //       setBio(temp.bio);\n  //       setRecipes(temp.fav_recipes);\n  //   }\n  //\n  //   fetchUserDetails();\n  //  });\n\n  async function fetchUserDetails(){\n    //console.log(\"Ankit\");\n    const response = await fetch('/profile-stats', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(username),\n    });\n\n      var temp = await response.json();\n      setEmail(temp.email);\n      setBio(temp.bio);\n      setRecipes(temp.fav_recipes);\n      setImage(temp.image);\n  }\n\n  function fetchUserDetailsCall(){\n    if(fetched === \"false\"){\n      fetchUserDetails();\n      setFetched(\"true\");\n    }\n  }\n\n   useEffect(() => {},[email]);\n   useEffect(() => {},[bio]);\n   useEffect(() => {},[recipes]); //This line leads to backend request infinite loop\n   useEffect(() => {},[imageOption]);\n\n  function bioSetting(event){\n    event.persist()\n    if(bioChange === \"true\"){\n      console.log(event.target[0].value);\n\n      if(event.target[0].value.length === 0){\n        console.log(\"Empty Bio not allowed!\");\n      }\n      else{\n        fetch('/set-bio', {\n    \t\t  method: \"POST\",\n    \t\t  headers: {\n    \t\t    'Content-type': 'application/json'\n    \t\t  },\n    \t\t  body: JSON.stringify({Username:username, Bio: event.target[0].value }),\n    \t\t});\n        setBio(event.target[0].value);\n\n      }\n      updateBio(\"false\");\n    }\n    else{\n      updateBio(\"true\");\n    }\n  }\n\n  function bioFunction(){\n\n    if(bioChange === \"false\"){\n      return <button onClick={bioSetting} type=\"button\" className=\"btn btn-outline-secondary\">Change bio</button>\n    }\n    else{\n      return (<form onSubmit={bioSetting} action=\"javascript:void(0);\" method=\"POST\">\n          <div className=\"form2\">\n          <div className=\"form-group2\">\n          <input type=\" type\" className=\"textArea2 center\" name=\"paragraph_text\" cols=\"50\" rows=\"5\" required/>\n          <input type=\"submit\" className=\"btn btn-outline-secondary center\" value=\"Update bio\" />\n          </div>\n        </div>\n      </form>)\n    }\n  }\n\n  async function passwordSetting(event){\n    event.persist()\n\n    if(password.length === 0){\n      updatePassword(\"false\");\n      setOldPasswordCorrect(\"true\");\n    }\n\n    if(passwordWrong === \"true\"){\n      console.log(\"Password doesn't match!\")\n    }\n    else if(passwordChange === \"true\"){\n      console.log(event.target[0].value);\n      console.log(event.target[1].value);\n\n      const response = await fetch('/change-password', {\n  \t\t  method: \"POST\",\n  \t\t  headers: {\n  \t\t    'Content-type': 'application/json'\n  \t\t  },\n  \t\t  body: JSON.stringify({ Username:username,\"old\": event.target[0].value, \"new\": event.target[1].value }),\n  \t\t});\n\n      var json = await response.json();\n\n      if(json.auth === \"true\"){\n        console.log(\"Successful\")\n        updatePassword(\"false\");\n        setOldPasswordCorrect(\"true\");\n      }\n      else{\n        setOldPasswordCorrect(\"false\");\n      }\n\n    }\n    else{\n      updatePassword(\"true\");\n    }\n  }\n\n  useEffect(() => {},[oldPasswordCorrect]);\n\n  function updateNewPassword(event){\n    event.persist()\n    changePassword(event.target.value);\n  }\n\n  function checkNewPassword(event){\n    event.persist()\n    if(event.target.value === password){\n      passwordWrongUpdate(\"false\");\n    }\n    else{\n      passwordWrongUpdate(\"true\");\n    }\n  }\n\n  function passwordFunction(){\n\n    if(passwordChange === \"false\"){\n      return <button onClick={passwordSetting} type=\"button\" className=\"btn btn-outline-secondary\">Change Password</button>\n    }\n    else{\n      return (<form onSubmit={passwordSetting} action=\"javascript:void(0);\" method=\"POST\">\n          <div className=\"form2\">\n          <div className=\"form-group2\">\n  \t\t\t\t<input className=\"input2 password-input2\" type=\"password\" name=\"old-password\" placeholder=\"old password\" required/>\n  \t\t\t\t<input onChange={updateNewPassword} className=\"input2 password-input2\" type=\"password\" name=\"new-password\" placeholder=\"new password\" minlength=\"6\" required/>\n  \t\t\t\t<input onChange={checkNewPassword} className=\"input2 password-input2\" type=\"password\" name=\"confirm-password\" placeholder=\"confirm password\" required/>\n          <div style={{margin:\"auto\", padding:\"5px\"}}>{passwordWrong === \"true\" ? <p style={{color:\"red\"}}>Password doesn't match.</p> : null}</div>\n\n          <div style={{margin:\"auto\", padding:\"5px\"}}>{oldPasswordCorrect === \"false\" ? <p style={{color:\"red\"}}>Old Password doesn't match.</p> : null}</div>\n\n          <input type=\"submit\" className=\"btn btn-outline-secondary center\" value=\"Update Password\" />\n          </div>\n        </div>\n      </form>)\n    }\n  }\n\n  const getBase64 = (file) => {\n   return new Promise((resolve,reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n      reader.readAsDataURL(file);\n   });\n }\n\n  async function newImage(event){\n    event.persist();\n    // event.preventDefault();\n    const data = new FormData();\n    data.append('file', uploadInput.files[0]);\n\n    const file = uploadInput.files[0];\n\n    getBase64(file).then(base64 => {\n      setImage(base64);\n      const response = fetch('/user-image-change', {\n       method: \"POST\",\n       headers: {\n         'Content-type': 'application/json'\n       },\n       body: JSON.stringify({Image:base64, Username:username}),\n      });\n      console.debug(\"file stored\",base64);\n      //console.log(\"file stored\",base64);\n    });\n\n    setImageOption(\"false\");\n  }\n\n  function changeUserImage(){\n    imageOption===\"false\" ? setImageOption(\"true\") : setImageOption(\"false\");\n  }\n\n  const[selected,setSelected] = useState(\"left\");\n  //useEffect(() => {},[selected]);\n\n  return (\n      <div className=\"profile-container\">\n        <div>{<>{fetchUserDetailsCall()}</>}</div>\n        <div>\n          <img className=\"back-img\" src={backImg} alt=\"img\"/>\n        </div>\n        <div className=\"container2\">\n          <div>\n            <img className=\"user2\" src={image} alt=\"img\" onClick={changeUserImage}/>\n            {imageOption === \"true\" ?\n              <form action=\"javascript:void(0);\" onSubmit={newImage}>\n              <div className=\"tc\" style={{marginLeft:\"100px\"}}>\n                <input className=\"btn btn-outline-secondary\" ref={(ref) => { setUploadInput(ref) }} type=\"file\" accept=\"image/*\" required />\n                <button className=\"btn btn-outline-secondary\">Upload</button>\n              </div></form> :\n              null }\n            <h2 className=\"header2\">{username}</h2>\n            <p className=\"header-content2\">{email}</p>\n            <div className=\"city2 header-content2\">\n              <i className=\"city2 header-content2 fas fa-map-marker-alt mr-2 text-lg text-gray-500\"></i>{\" \"}\n              Chandigarh, India\n            </div>\n            <div className=\"button-css2\">\n              {<>{passwordFunction()}</>}\n            </div>\n            <hr className=\"fancy-line\"/>\n            <div className=\"bio\">\n              <p>{bio}</p>\n            </div>\n            <div className=\"button-css2\">\n              {<>{bioFunction()}</>}\n            </div>\n          </div>\n        </div>\n\n        <div>\n          {<>{fetchPostsCall()}</>}\n        </div>\n\n        {selected === \"left\" ?\n        <div>\n          <div style={{height:\"100px\"}}>\n            <div className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\"><h1 className=\"tc dashboard-favorites\">My Favorites</h1></div>\n            <div onClick={() => setSelected(\"right\")} className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\"><h1 className=\"tc dashboard-favorites\">My Posts</h1></div>\n          </div>\n\n          <div style={{width:\"97%\",margin:\"auto\", marginTop:\"4%\"}}>\n              {recipes.length === 0 ? <h1 className=\"tc\" style={{padding:\"4%\",paddingTop:\"3%\",color:\"#202020\"}}>You have no Favorite Recipes yet!</h1> : <Cards recipes={recipes}/>}\n          </div>\n        </div>:\n\n        <div>\n          <div style={{height:\"100px\"}}>\n            <div onClick={() => setSelected(\"left\")} className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\"><h1 className=\"tc dashboard-favorites\">My Favorites</h1></div>\n            <div className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\"><h1 className=\"tc dashboard-favorites\">My Posts</h1></div>\n          </div>\n\n\n          <div style={{width:\"90%\", alignContent:\"center\", margin:\"auto\", marginTop:\"4%\"}}>\n              {posts.length === 0 ? <h1 className=\"tc\" style={{padding:\"4%\",paddingTop:\"3%\",color:\"#202020\"}}>You have no Posts yet!</h1> : <Posts posts={posts} hide=\"true\"/>}\n          </div>\n        </div>}\n\n      </div>\n  );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}