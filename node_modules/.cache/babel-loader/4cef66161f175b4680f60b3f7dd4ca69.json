{"ast":null,"code":"var _jsxFileName = \"/Users/tazeen/Desktop/IR/src/Login/src/components/userPage/profile.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Cards from \"../../../../components/Cards\";\nimport Posts from \"../../../../components/feed/posts\";\nimport \"./profile.css\";\nimport backImg from \"./back-img.jpg\";\nimport userImg from \"./user-img.png\"; //import \"@fortawesome/fontawesome-free/css/all.min.css\";\n\nvar login = localStorage.getItem('loggedIn');\nvar userName = localStorage.getItem('username');\nvar tempImg = \"\";\n\nfunction Profile() {\n  const [username, setUsername] = useState(userName);\n  const [email, setEmail] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [bioChange, updateBio] = useState(\"false\");\n  const [password, changePassword] = useState(\"\");\n  const [passwordChange, updatePassword] = useState(\"false\");\n  const [passwordWrong, passwordWrongUpdate] = useState(\"false\");\n  const [oldPasswordCorrect, setOldPasswordCorrect] = useState(\"true\");\n  const [fetched, setFetched] = useState(\"false\");\n  const [recipes, setRecipes] = useState([]);\n  const [image, setImage] = useState(\"\");\n  const [imageOption, setImageOption] = useState(\"false\");\n  const [uploadInput, setUploadInput] = useState();\n  const [fetched1, setFetched1] = useState(\"false\");\n  const [posts, setPosts] = useState([]);\n\n  async function fetchPosts() {\n    //console.log(\"Ankit\");\n    const response = await fetch('/fetch-posts', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(userName)\n    });\n    var temp = await response.json();\n    var temp2 = [];\n\n    for (var i = 0; i < temp[0].length; ++i) {\n      if (temp[0][i].username === userName) {\n        temp2.push(temp[0][i]);\n      }\n    }\n\n    setPosts(temp2);\n    console.log(temp[0]);\n  }\n\n  function fetchPostsCall() {\n    if (fetched1 === \"false\") {\n      fetchPosts();\n      setFetched1(\"true\");\n    }\n  } // useEffect(() => {\n  //\n  //   async function fetchUserDetails(){\n  //     const response = await fetch('/profile-stats', {\n  // \t\t  method: \"POST\",\n  // \t\t  headers: {\n  // \t\t    'Content-type': 'application/json'\n  // \t\t  },\n  // \t\t  body: JSON.stringify(username),\n  // \t\t});\n  //\n  //     \tvar temp = await response.json();\n  //       setEmail(temp.email);\n  //       setBio(temp.bio);\n  //       setRecipes(temp.fav_recipes);\n  //   }\n  //\n  //   fetchUserDetails();\n  //  });\n\n\n  async function fetchUserDetails() {\n    //console.log(\"Ankit\");\n    const response = await fetch('/profile-stats', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(username)\n    });\n    var temp = await response.json();\n    setEmail(temp.email);\n    setBio(temp.bio);\n    setRecipes(temp.fav_recipes);\n    setImage(temp.image);\n  }\n\n  function fetchUserDetailsCall() {\n    if (fetched === \"false\") {\n      fetchUserDetails();\n      setFetched(\"true\");\n    }\n  }\n\n  useEffect(() => {}, [email]);\n  useEffect(() => {}, [bio]);\n  useEffect(() => {}, [recipes]); //This line leads to backend request infinite loop\n\n  useEffect(() => {}, [imageOption]);\n\n  function bioSetting(event) {\n    event.persist();\n\n    if (bioChange === \"true\") {\n      console.log(event.target[0].value);\n\n      if (event.target[0].value.length === 0) {\n        console.log(\"Empty Bio not allowed!\");\n      } else {\n        fetch('/set-bio', {\n          method: \"POST\",\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify({\n            Username: username,\n            Bio: event.target[0].value\n          })\n        });\n        setBio(event.target[0].value);\n      }\n\n      updateBio(\"false\");\n    } else {\n      updateBio(\"true\");\n    }\n  }\n\n  function bioFunction() {\n    if (bioChange === \"false\") {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        onClick: bioSetting,\n        type: \"button\",\n        className: \"btn btn-outline-secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 14\n        }\n      }, \"Change bio\");\n    } else {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: bioSetting,\n        action: \"javascript:void(0);\",\n        method: \"POST\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \" type\",\n        className: \"textArea2 center\",\n        name: \"paragraph_text\",\n        cols: \"50\",\n        rows: \"5\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn btn-outline-secondary center\",\n        value: \"Update bio\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }\n      }))));\n    }\n  }\n\n  async function passwordSetting(event) {\n    event.persist();\n\n    if (password.length === 0) {\n      updatePassword(\"false\");\n      setOldPasswordCorrect(\"true\");\n    }\n\n    if (passwordWrong === \"true\") {\n      console.log(\"Password doesn't match!\");\n    } else if (passwordChange === \"true\") {\n      console.log(event.target[0].value);\n      console.log(event.target[1].value);\n      const response = await fetch('/change-password', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          Username: username,\n          \"old\": event.target[0].value,\n          \"new\": event.target[1].value\n        })\n      });\n      var json = await response.json();\n\n      if (json.auth === \"true\") {\n        console.log(\"Successful\");\n        updatePassword(\"false\");\n        setOldPasswordCorrect(\"true\");\n      } else {\n        setOldPasswordCorrect(\"false\");\n      }\n    } else {\n      updatePassword(\"true\");\n    }\n  }\n\n  useEffect(() => {}, [oldPasswordCorrect]);\n\n  function updateNewPassword(event) {\n    event.persist();\n    changePassword(event.target.value);\n  }\n\n  function checkNewPassword(event) {\n    event.persist();\n\n    if (event.target.value === password) {\n      passwordWrongUpdate(\"false\");\n    } else {\n      passwordWrongUpdate(\"true\");\n    }\n  }\n\n  function passwordFunction() {\n    if (passwordChange === \"false\") {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        onClick: passwordSetting,\n        type: \"button\",\n        className: \"btn btn-outline-secondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 14\n        }\n      }, \"Change Password\");\n    } else {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: passwordSetting,\n        action: \"javascript:void(0);\",\n        method: \"POST\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"input2 password-input2\",\n        type: \"password\",\n        name: \"old-password\",\n        placeholder: \"old password\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        onChange: updateNewPassword,\n        className: \"input2 password-input2\",\n        type: \"password\",\n        name: \"new-password\",\n        placeholder: \"new password\",\n        minlength: \"6\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        onChange: checkNewPassword,\n        className: \"input2 password-input2\",\n        type: \"password\",\n        name: \"confirm-password\",\n        placeholder: \"confirm password\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          margin: \"auto\",\n          padding: \"5px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }\n      }, passwordWrong === \"true\" ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 83\n        }\n      }, \"Password doesn't match.\") : null), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          margin: \"auto\",\n          padding: \"5px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }\n      }, oldPasswordCorrect === \"false\" ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 89\n        }\n      }, \"Old Password doesn't match.\") : null), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"btn btn-outline-secondary center\",\n        value: \"Update Password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }\n      }))));\n    }\n  }\n\n  const getBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  async function newImage(event) {\n    event.persist(); // event.preventDefault();\n\n    const data = new FormData();\n    data.append('file', uploadInput.files[0]);\n    const file = uploadInput.files[0];\n    getBase64(file).then(base64 => {\n      setImage(base64);\n      const response = fetch('/user-image-change', {\n        method: \"POST\",\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          Image: base64,\n          Username: username\n        })\n      });\n      console.debug(\"file stored\", base64); //console.log(\"file stored\",base64);\n    });\n    setImageOption(\"false\");\n  }\n\n  function changeUserImage() {\n    imageOption === \"false\" ? setImageOption(\"true\") : setImageOption(\"false\");\n  }\n\n  const [selected, setSelected] = useState(\"left\"); //useEffect(() => {},[selected]);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, fetchUserDetailsCall())), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"back-img\",\n    src: backImg,\n    alt: \"img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"user2\",\n    src: image,\n    alt: \"img\",\n    onClick: changeUserImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }), imageOption === \"true\" ? /*#__PURE__*/React.createElement(\"form\", {\n    action: \"javascript:void(0);\",\n    onSubmit: newImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tc\",\n    style: {\n      marginLeft: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"btn btn-outline-secondary\",\n    ref: ref => {\n      setUploadInput(ref);\n    },\n    type: \"file\",\n    accept: \"image/*\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }\n  }, \"Upload\"))) : null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"header2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, username), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"header-content2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }, email), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"city2 header-content2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"city2 header-content2 fas fa-map-marker-alt mr-2 text-lg text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 15\n    }\n  }), \" \", \"Chandigarh, India\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-css2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, passwordFunction())), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"fancy-line\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  }, bio)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-css2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, bioFunction())))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, fetchPostsCall())), selected === \"left\" ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tc dashboard-favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 86\n    }\n  }, \"My Favorites\")), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setSelected(\"right\"),\n    className: \"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tc dashboard-favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 117\n    }\n  }, \"My Posts\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"97%\",\n      margin: \"auto\",\n      marginTop: \"4%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 11\n    }\n  }, recipes.length === 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tc\",\n    style: {\n      padding: \"4%\",\n      paddingTop: \"3%\",\n      color: \"#202020\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 39\n    }\n  }, \"You have no Favorite Recipes yet!\") : /*#__PURE__*/React.createElement(Cards, {\n    recipes: recipes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 154\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setSelected(\"left\"),\n    className: \"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tc dashboard-favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 116\n    }\n  }, \"My Favorites\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tc dashboard-favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 86\n    }\n  }, \"My Posts\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"90%\",\n      alignContent: \"center\",\n      margin: \"auto\",\n      marginTop: \"4%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 11\n    }\n  }, posts.length === 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"tc\",\n    style: {\n      padding: \"4%\",\n      paddingTop: \"3%\",\n      color: \"#202020\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 37\n    }\n  }, \"You have no Posts yet!\") : /*#__PURE__*/React.createElement(Posts, {\n    posts: posts,\n    hide: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 141\n    }\n  }))));\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/tazeen/Desktop/IR/src/Login/src/components/userPage/profile.js"],"names":["React","useState","useEffect","Cards","Posts","backImg","userImg","login","localStorage","getItem","userName","tempImg","Profile","username","setUsername","email","setEmail","bio","setBio","bioChange","updateBio","password","changePassword","passwordChange","updatePassword","passwordWrong","passwordWrongUpdate","oldPasswordCorrect","setOldPasswordCorrect","fetched","setFetched","recipes","setRecipes","image","setImage","imageOption","setImageOption","uploadInput","setUploadInput","fetched1","setFetched1","posts","setPosts","fetchPosts","response","fetch","method","headers","body","JSON","stringify","temp","json","temp2","i","length","push","console","log","fetchPostsCall","fetchUserDetails","fav_recipes","fetchUserDetailsCall","bioSetting","event","persist","target","value","Username","Bio","bioFunction","passwordSetting","auth","updateNewPassword","checkNewPassword","passwordFunction","margin","padding","color","getBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","newImage","data","FormData","append","files","then","base64","Image","debug","changeUserImage","selected","setSelected","marginLeft","ref","height","width","marginTop","paddingTop","alignContent"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport Cards from \"../../../../components/Cards\";\nimport Posts from \"../../../../components/feed/posts\";\nimport \"./profile.css\"\nimport backImg from \"./back-img.jpg\"\nimport userImg from \"./user-img.png\"\n//import \"@fortawesome/fontawesome-free/css/all.min.css\";\n\nvar login = localStorage.getItem('loggedIn');\nvar userName = localStorage.getItem('username');\nvar tempImg = \"\";\n\nfunction Profile() {\n  const[username, setUsername] = useState(userName);\n  const[email, setEmail] = useState(\"\");\n  const[bio, setBio] = useState(\"\");\n  const[bioChange, updateBio] = useState(\"false\");\n  const[password, changePassword] = useState(\"\");\n  const[passwordChange, updatePassword] = useState(\"false\");\n  const[passwordWrong, passwordWrongUpdate] = useState(\"false\");\n\n  const[oldPasswordCorrect, setOldPasswordCorrect] = useState(\"true\");\n\n  const[fetched, setFetched] = useState(\"false\");\n\n  const [recipes, setRecipes] = useState([]);\n  const [image, setImage] = useState(\"\");\n\n  const [imageOption, setImageOption] = useState(\"false\");\n  const [uploadInput, setUploadInput] = useState();\n\n  const[fetched1, setFetched1] = useState(\"false\");\n  const[posts, setPosts] = useState([]);\n\n  async function fetchPosts(){\n    //console.log(\"Ankit\");\n    const response = await fetch('/fetch-posts', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(userName),\n    });\n\n      var temp = await response.json();\n      var temp2= []\n      for(var i=0;i<temp[0].length;++i){\n        if(temp[0][i].username === userName){\n          temp2.push(temp[0][i]);\n        }\n      }\n      setPosts(temp2);\n      console.log(temp[0]);\n  }\n\n  function fetchPostsCall(){\n    if(fetched1 === \"false\"){\n      fetchPosts();\n      setFetched1(\"true\");\n    }\n  }\n\n\n\n  // useEffect(() => {\n  //\n  //   async function fetchUserDetails(){\n  //     const response = await fetch('/profile-stats', {\n  // \t\t  method: \"POST\",\n  // \t\t  headers: {\n  // \t\t    'Content-type': 'application/json'\n  // \t\t  },\n  // \t\t  body: JSON.stringify(username),\n  // \t\t});\n  //\n  //     \tvar temp = await response.json();\n  //       setEmail(temp.email);\n  //       setBio(temp.bio);\n  //       setRecipes(temp.fav_recipes);\n  //   }\n  //\n  //   fetchUserDetails();\n  //  });\n\n  async function fetchUserDetails(){\n    //console.log(\"Ankit\");\n    const response = await fetch('/profile-stats', {\n      method: \"POST\",\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(username),\n    });\n\n      var temp = await response.json();\n      setEmail(temp.email);\n      setBio(temp.bio);\n      setRecipes(temp.fav_recipes);\n      setImage(temp.image);\n  }\n\n  function fetchUserDetailsCall(){\n    if(fetched === \"false\"){\n      fetchUserDetails();\n      setFetched(\"true\");\n    }\n  }\n\n   useEffect(() => {},[email]);\n   useEffect(() => {},[bio]);\n   useEffect(() => {},[recipes]); //This line leads to backend request infinite loop\n   useEffect(() => {},[imageOption]);\n\n  function bioSetting(event){\n    event.persist()\n    if(bioChange === \"true\"){\n      console.log(event.target[0].value);\n\n      if(event.target[0].value.length === 0){\n        console.log(\"Empty Bio not allowed!\");\n      }\n      else{\n        fetch('/set-bio', {\n    \t\t  method: \"POST\",\n    \t\t  headers: {\n    \t\t    'Content-type': 'application/json'\n    \t\t  },\n    \t\t  body: JSON.stringify({Username:username, Bio: event.target[0].value }),\n    \t\t});\n        setBio(event.target[0].value);\n\n      }\n      updateBio(\"false\");\n    }\n    else{\n      updateBio(\"true\");\n    }\n  }\n\n  function bioFunction(){\n\n    if(bioChange === \"false\"){\n      return <button onClick={bioSetting} type=\"button\" className=\"btn btn-outline-secondary\">Change bio</button>\n    }\n    else{\n      return (<form onSubmit={bioSetting} action=\"javascript:void(0);\" method=\"POST\">\n          <div className=\"form2\">\n          <div className=\"form-group2\">\n          <input type=\" type\" className=\"textArea2 center\" name=\"paragraph_text\" cols=\"50\" rows=\"5\" required/>\n          <input type=\"submit\" className=\"btn btn-outline-secondary center\" value=\"Update bio\" />\n          </div>\n        </div>\n      </form>)\n    }\n  }\n\n  async function passwordSetting(event){\n    event.persist()\n\n    if(password.length === 0){\n      updatePassword(\"false\");\n      setOldPasswordCorrect(\"true\");\n    }\n\n    if(passwordWrong === \"true\"){\n      console.log(\"Password doesn't match!\")\n    }\n    else if(passwordChange === \"true\"){\n      console.log(event.target[0].value);\n      console.log(event.target[1].value);\n\n      const response = await fetch('/change-password', {\n  \t\t  method: \"POST\",\n  \t\t  headers: {\n  \t\t    'Content-type': 'application/json'\n  \t\t  },\n  \t\t  body: JSON.stringify({ Username:username,\"old\": event.target[0].value, \"new\": event.target[1].value }),\n  \t\t});\n\n      var json = await response.json();\n\n      if(json.auth === \"true\"){\n        console.log(\"Successful\")\n        updatePassword(\"false\");\n        setOldPasswordCorrect(\"true\");\n      }\n      else{\n        setOldPasswordCorrect(\"false\");\n      }\n\n    }\n    else{\n      updatePassword(\"true\");\n    }\n  }\n\n  useEffect(() => {},[oldPasswordCorrect]);\n\n  function updateNewPassword(event){\n    event.persist()\n    changePassword(event.target.value);\n  }\n\n  function checkNewPassword(event){\n    event.persist()\n    if(event.target.value === password){\n      passwordWrongUpdate(\"false\");\n    }\n    else{\n      passwordWrongUpdate(\"true\");\n    }\n  }\n\n  function passwordFunction(){\n\n    if(passwordChange === \"false\"){\n      return <button onClick={passwordSetting} type=\"button\" className=\"btn btn-outline-secondary\">Change Password</button>\n    }\n    else{\n      return (<form onSubmit={passwordSetting} action=\"javascript:void(0);\" method=\"POST\">\n          <div className=\"form2\">\n          <div className=\"form-group2\">\n  \t\t\t\t<input className=\"input2 password-input2\" type=\"password\" name=\"old-password\" placeholder=\"old password\" required/>\n  \t\t\t\t<input onChange={updateNewPassword} className=\"input2 password-input2\" type=\"password\" name=\"new-password\" placeholder=\"new password\" minlength=\"6\" required/>\n  \t\t\t\t<input onChange={checkNewPassword} className=\"input2 password-input2\" type=\"password\" name=\"confirm-password\" placeholder=\"confirm password\" required/>\n          <div style={{margin:\"auto\", padding:\"5px\"}}>{passwordWrong === \"true\" ? <p style={{color:\"red\"}}>Password doesn't match.</p> : null}</div>\n\n          <div style={{margin:\"auto\", padding:\"5px\"}}>{oldPasswordCorrect === \"false\" ? <p style={{color:\"red\"}}>Old Password doesn't match.</p> : null}</div>\n\n          <input type=\"submit\" className=\"btn btn-outline-secondary center\" value=\"Update Password\" />\n          </div>\n        </div>\n      </form>)\n    }\n  }\n\n  const getBase64 = (file) => {\n   return new Promise((resolve,reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n      reader.readAsDataURL(file);\n   });\n }\n\n  async function newImage(event){\n    event.persist();\n    // event.preventDefault();\n    const data = new FormData();\n    data.append('file', uploadInput.files[0]);\n\n    const file = uploadInput.files[0];\n\n    getBase64(file).then(base64 => {\n      setImage(base64);\n      const response = fetch('/user-image-change', {\n       method: \"POST\",\n       headers: {\n         'Content-type': 'application/json'\n       },\n       body: JSON.stringify({Image:base64, Username:username}),\n      });\n      console.debug(\"file stored\",base64);\n      //console.log(\"file stored\",base64);\n    });\n\n    setImageOption(\"false\");\n  }\n\n  function changeUserImage(){\n    imageOption===\"false\" ? setImageOption(\"true\") : setImageOption(\"false\");\n  }\n\n  const[selected,setSelected] = useState(\"left\");\n  //useEffect(() => {},[selected]);\n\n  return (\n      <div className=\"profile-container\">\n        <div>{<>{fetchUserDetailsCall()}</>}</div>\n        <div>\n          <img className=\"back-img\" src={backImg} alt=\"img\"/>\n        </div>\n        <div className=\"container2\">\n          <div>\n            <img className=\"user2\" src={image} alt=\"img\" onClick={changeUserImage}/>\n            {imageOption === \"true\" ?\n              <form action=\"javascript:void(0);\" onSubmit={newImage}>\n              <div className=\"tc\" style={{marginLeft:\"100px\"}}>\n                <input className=\"btn btn-outline-secondary\" ref={(ref) => { setUploadInput(ref) }} type=\"file\" accept=\"image/*\" required />\n                <button className=\"btn btn-outline-secondary\">Upload</button>\n              </div></form> :\n              null }\n            <h2 className=\"header2\">{username}</h2>\n            <p className=\"header-content2\">{email}</p>\n            <div className=\"city2 header-content2\">\n              <i className=\"city2 header-content2 fas fa-map-marker-alt mr-2 text-lg text-gray-500\"></i>{\" \"}\n              Chandigarh, India\n            </div>\n            <div className=\"button-css2\">\n              {<>{passwordFunction()}</>}\n            </div>\n            <hr className=\"fancy-line\"/>\n            <div className=\"bio\">\n              <p>{bio}</p>\n            </div>\n            <div className=\"button-css2\">\n              {<>{bioFunction()}</>}\n            </div>\n          </div>\n        </div>\n\n        <div>\n          {<>{fetchPostsCall()}</>}\n        </div>\n\n        {selected === \"left\" ?\n        <div>\n          <div style={{height:\"100px\"}}>\n            <div className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\"><h1 className=\"tc dashboard-favorites\">My Favorites</h1></div>\n            <div onClick={() => setSelected(\"right\")} className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\"><h1 className=\"tc dashboard-favorites\">My Posts</h1></div>\n          </div>\n\n          <div style={{width:\"97%\",margin:\"auto\", marginTop:\"4%\"}}>\n              {recipes.length === 0 ? <h1 className=\"tc\" style={{padding:\"4%\",paddingTop:\"3%\",color:\"#202020\"}}>You have no Favorite Recipes yet!</h1> : <Cards recipes={recipes}/>}\n          </div>\n        </div>:\n\n        <div>\n          <div style={{height:\"100px\"}}>\n            <div onClick={() => setSelected(\"left\")} className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isNotSelected\"><h1 className=\"tc dashboard-favorites\">My Favorites</h1></div>\n            <div className=\"col-xs-6 col-sm-6 col-md-6 col-lg-6 isSelected shadow-5\"><h1 className=\"tc dashboard-favorites\">My Posts</h1></div>\n          </div>\n\n\n          <div style={{width:\"90%\", alignContent:\"center\", margin:\"auto\", marginTop:\"4%\"}}>\n              {posts.length === 0 ? <h1 className=\"tc\" style={{padding:\"4%\",paddingTop:\"3%\",color:\"#202020\"}}>You have no Posts yet!</h1> : <Posts posts={posts} hide=\"true\"/>}\n          </div>\n        </div>}\n\n      </div>\n  );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}